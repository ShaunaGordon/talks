

<script>
    let observerOpts = {
        attributes: true
    };

    document.querySelectorAll('.typing').forEach(function(el) {
        const typed = new Typed(el.querySelector('.typed'), {
            stringsElement: el.querySelector('.typed-strings'),
            loop: false,
            startDelay: 3500,
            typeSpeed: 40,
            showCursor: false
        });
        typed.stop();

        // TODO: Reveal 4 has events that can help with this
        // use them instead, after Reveal-Hugo updates
        // See: https://github.com/dzello/reveal-hugo/pull/91
        let observer = new MutationObserver((entries) => {
            let target = entries[0].target;

            if(target.classList.contains('present')) {
                typed.start();
            }

            if(!target.classList.contains('present')) {
                typed.reset();
            }
        });

        observer.observe(el.parentNode, observerOpts);
    });


</script>
